   Compiling p2p_core v0.1.0 (/app/p2p_core)
warning: unused import: `SinkExt`
 --> p2p_core/tests/security_ws_dos.rs:2:20
  |
2 | use futures_util::{SinkExt, StreamExt};
  |                    ^^^^^^^
  |
  = note: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default

warning: `p2p_core` (test "security_ws_dos") generated 1 warning (run `cargo fix --test "security_ws_dos" -p p2p_core` to apply 1 suggestion)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 7.65s
     Running tests/security_ws_dos.rs (target/debug/deps/security_ws_dos-ae8d50c40556fae8)

running 1 test
Testing with MAX_CONNECTIONS = 100
DEBUG: handle_socket called. count before: 0
DEBUG: handle_socket called. count before: 1
DEBUG: handle_socket called. count before: 2
DEBUG: handle_socket called. count before: 3
DEBUG: handle_socket called. count before: 4
DEBUG: handle_socket called. count before: 5
DEBUG: handle_socket called. count before: 6
DEBUG: handle_socket called. count before: 7
DEBUG: handle_socket called. count before: 8
DEBUG: handle_socket called. count before: 9
DEBUG: handle_socket called. count before: 10
DEBUG: handle_socket called. count before: 11
DEBUG: handle_socket called. count before: 12
DEBUG: handle_socket called. count before: 13
DEBUG: handle_socket called. count before: 14
DEBUG: handle_socket called. count before: 15
DEBUG: handle_socket called. count before: 16
DEBUG: handle_socket called. count before: 17
DEBUG: handle_socket called. count before: 18
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19
DEBUG: handle_socket called. count before: 19

thread 'test_max_concurrent_connections_dos' (11202) panicked at p2p_core/tests/security_ws_dos.rs:105:5:
Should have rejected at least some connections. Rejected: 0
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
test test_max_concurrent_connections_dos ... FAILED

failures:

failures:
    test_max_concurrent_connections_dos

test result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 54.11s

error: test failed, to rerun pass `-p p2p_core --test security_ws_dos`
